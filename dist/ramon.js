!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("THREE")):"function"==typeof define&&define.amd?define(["THREE"],t):"object"==typeof exports?exports.ramon=t(require("THREE")):e.ramon=t(e.THREE)}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=6)}([function(t,o){t.exports=e},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);function s(e=0,t=10){return e+Math.floor(Math.random()*(t-e))}t.randInt=s,t.randomPoint=function(){return[s(-50,50),s(-50,50),s(-50,50)]},t.randomScalar=function(){return s(0,10)},t.randomColor=function(){return new n.Color(s(0,16777216))},t.toFunction=function(e){return()=>e};const i=new n.Color;t.standardizeColor=function(e){return"string"==typeof e?i.set(e):e}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(1);t.default=class{constructor(){this.morphe=n.BufferGeometry}getGeometryBuffers(e,t,...o){const n=o.length,i=3*n,r=i*e.length,a=new Float32Array(r),c=new Float32Array(r);return e.forEach((e,r)=>{o.forEach((t,o)=>{a.set(t(e,r),i*r+3*o)});const u=t(e,r),d=s.standardizeColor(u).toArray();for(let e=0;e<n;++e)c.set(d,i*r+3*e)}),[c,a]}realize(e,t){Array.isArray(e)||(e=[e]),this.geometry=new this.morphe,this.material=new this.hyle;const[o,s]=this.getGeometryBuffers(e,this.color,...this.pointMaps);return this.geometry.addAttribute("position",new n.Float32BufferAttribute(s,3)),this.geometry.addAttribute("color",new n.Float32BufferAttribute(o,3)),this.mesh=new this.ousia(this.geometry,this.material),this.mesh}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(2),s=o(0),i=o(1);t.default=class extends n.default{constructor(e,...t){super(),this.morphe=e,this.hyle=s.MeshBasicMaterial.bind(null,{color:i.randomColor()}),this.ousia=s.Mesh}realize(e,t){this.geometry=new this.morphe(...this.dimensions.map((t,o)=>t(e,o))),this.material=new this.hyle,this.color&&this.material.setValues({color:i.standardizeColor(this.color(e,t))}),this.mesh=new this.ousia(this.geometry,this.material);const[o,n,s]=this.position(e,t);return this.mesh.translateX(o),this.mesh.translateY(n),this.mesh.translateZ(s),this.mesh}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(1),i=o(2);t.default=class extends i.default{constructor(e=s.randomColor,t=s.randomPoint,o=s.randomPoint){super(),this.color=e,this.from=t,this.to=o,this.hyle=n.LineBasicMaterial.bind(null,{vertexColors:n.VertexColors,linewidth:2}),this.ousia=n.LineSegments}get pointMaps(){return[this.from,this.to]}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(1),i=o(2);t.default=class extends i.default{constructor(e=s.randomPoint,t=s.randomColor){super(),this.position=e,this.color=t,this.hyle=n.PointsMaterial.bind(null,{vertexColors:n.VertexColors}),this.ousia=n.Points}get pointMaps(){return[this.position]}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);!function(e){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o])}(o(7));var s=o(8);t.CameraSettings=s.default;var i=o(10);t.Cuboid=i.default;var r=o(4);t.Line=r.default;var a=o(5);t.Point=a.default;var c=o(11);t.Sphere=c.default;var u=o(12);t.RenderLoop=u.default;var d=o(13);t.World=d.default,t.initialize=function(e=document.body){const t=new n.Scene,o=new n.WebGLRenderer;return o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),e.appendChild(o.domElement),{scene:t,renderer:o}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.group=function(e,t){const o={};e.forEach(e=>{const n=(e=>JSON.stringify(t.groupFields.map(t=>e[t])))(e);o[n]=o[n]||[],o[n].push(e)});const n=[],s=`${t.aggregateFn.name}_${t.aggregateField}`;for(const e in o){const i={},r=t.aggregateFn(o[e],t.aggregateField),a=JSON.parse(e);t.groupFields.forEach((e,t)=>{i[e]=a[t]}),i[s]=r,n.push(i)}return n};let n=0;t.datasetFromRange=function(e,t="val"){const o=[];for(let n=0;n<e;++n)o.push({[t]:n});return{id:String(n++),data:o}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(9);t.default=class{constructor(e,t=window.innerWidth/window.innerHeight,o,s){this.camera=new n.PerspectiveCamera(e,t)}activateControls(e){this.controls=new s(this.camera),Object.assign(this.controls,e)}refitWindow(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}}},function(e,t,o){var n,s=window.THREE||o(0);e.exports=n=function(e,t){var o=this,n={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new s.Vector3;var i=new s.Vector3,r=n.NONE,a=n.NONE,c=new s.Vector3,u=new s.Vector2,d=new s.Vector2,h=new s.Vector3,p=0,l=new s.Vector2,m=new s.Vector2,f=0,g=0,y=new s.Vector2,v=new s.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var w={type:"change"},E={type:"start"},b={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var O,P,j,M,_,x,L,A,C,S,V,T=(O=new s.Vector2,function(e,t){return O.set((e-o.screen.left)/o.screen.width,(t-o.screen.top)/o.screen.height),O}),N=function(){var e=new s.Vector2;return function(t,n){return e.set((t-.5*o.screen.width-o.screen.left)/(.5*o.screen.width),(o.screen.height+2*(o.screen.top-n))/o.screen.width),e}}();function R(e,t){return Array.isArray(e)?-1!==e.indexOf(t):e===t}function k(e){!1!==o.enabled&&(window.removeEventListener("keydown",k),a=r,r===n.NONE&&(R(o.keys[n.ROTATE],e.keyCode)&&!o.noRotate?r=n.ROTATE:R(o.keys[n.ZOOM],e.keyCode)&&!o.noZoom?r=n.ZOOM:R(o.keys[n.PAN],e.keyCode)&&!o.noPan&&(r=n.PAN)))}function F(e){!1!==o.enabled&&(r=a,window.addEventListener("keydown",k,!1))}function D(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),r===n.NONE&&(r=e.button),r!==n.ROTATE||o.noRotate?r!==n.ZOOM||o.noZoom?r!==n.PAN||o.noPan||(y.copy(T(e.pageX,e.pageY)),v.copy(y)):(l.copy(T(e.pageX,e.pageY)),m.copy(l)):(d.copy(N(e.pageX,e.pageY)),u.copy(d)),document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",z,!1),o.dispatchEvent(E))}function Y(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),r!==n.ROTATE||o.noRotate?r!==n.ZOOM||o.noZoom?r!==n.PAN||o.noPan||v.copy(T(e.pageX,e.pageY)):m.copy(T(e.pageX,e.pageY)):(u.copy(d),d.copy(N(e.pageX,e.pageY))))}function z(e){!1!==o.enabled&&(e.preventDefault(),e.stopPropagation(),r=n.NONE,document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",z),o.dispatchEvent(b))}function X(e){if(!1!==o.enabled){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:l.y-=.025*e.deltaY;break;case 1:l.y-=.01*e.deltaY;break;default:l.y-=25e-5*e.deltaY}o.dispatchEvent(E),o.dispatchEvent(b)}}function H(e){if(!1!==o.enabled){switch(e.touches.length){case 1:r=n.TOUCH_ROTATE,d.copy(N(e.touches[0].pageX,e.touches[0].pageY)),u.copy(d);break;default:r=n.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,s=e.touches[0].pageY-e.touches[1].pageY;g=f=Math.sqrt(t*t+s*s);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;y.copy(T(i,a)),v.copy(y)}o.dispatchEvent(E)}}function Z(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:u.copy(d),d.copy(N(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;g=Math.sqrt(t*t+n*n);var s=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;v.copy(T(s,i))}}function B(e){if(!1!==o.enabled){switch(e.touches.length){case 0:r=n.NONE;break;case 1:r=n.TOUCH_ROTATE,d.copy(N(e.touches[0].pageX,e.touches[0].pageY)),u.copy(d)}o.dispatchEvent(b)}}function q(e){!1!==o.enabled&&e.preventDefault()}this.rotateCamera=(j=new s.Vector3,M=new s.Quaternion,_=new s.Vector3,x=new s.Vector3,L=new s.Vector3,A=new s.Vector3,function(){A.set(d.x-u.x,d.y-u.y,0),(P=A.length())?(c.copy(o.object.position).sub(o.target),_.copy(c).normalize(),x.copy(o.object.up).normalize(),L.crossVectors(x,_).normalize(),x.setLength(d.y-u.y),L.setLength(d.x-u.x),A.copy(x.add(L)),j.crossVectors(A,c).normalize(),P*=o.rotateSpeed,M.setFromAxisAngle(j,P),c.applyQuaternion(M),o.object.up.applyQuaternion(M),h.copy(j),p=P):!o.staticMoving&&p&&(p*=Math.sqrt(1-o.dynamicDampingFactor),c.copy(o.object.position).sub(o.target),M.setFromAxisAngle(h,p),c.applyQuaternion(M),o.object.up.applyQuaternion(M)),u.copy(d)}),this.zoomCamera=function(){var e;r===n.TOUCH_ZOOM_PAN?(e=f/g,f=g,c.multiplyScalar(e)):(1!==(e=1+(m.y-l.y)*o.zoomSpeed)&&e>0&&c.multiplyScalar(e),o.staticMoving?l.copy(m):l.y+=(m.y-l.y)*this.dynamicDampingFactor)},this.panCamera=(C=new s.Vector2,S=new s.Vector3,V=new s.Vector3,function(){C.copy(v).sub(y),C.lengthSq()&&(C.multiplyScalar(c.length()*o.panSpeed),V.copy(c).cross(o.object.up).setLength(C.x),V.add(S.copy(o.object.up).setLength(C.y)),o.object.position.add(V),o.target.add(V),o.staticMoving?y.copy(v):y.add(C.subVectors(v,y).multiplyScalar(o.dynamicDampingFactor)))}),this.checkDistances=function(){o.noZoom&&o.noPan||(c.lengthSq()>o.maxDistance*o.maxDistance&&(o.object.position.addVectors(o.target,c.setLength(o.maxDistance)),l.copy(m)),c.lengthSq()<o.minDistance*o.minDistance&&(o.object.position.addVectors(o.target,c.setLength(o.minDistance)),l.copy(m)))},this.update=function(){c.subVectors(o.object.position,o.target),o.noRotate||o.rotateCamera(),o.noZoom||o.zoomCamera(),o.noPan||o.panCamera(),o.object.position.addVectors(o.target,c),o.checkDistances(),o.object.lookAt(o.target),i.distanceToSquared(o.object.position)>1e-6&&(o.dispatchEvent(w),i.copy(o.object.position))},this.reset=function(){r=n.NONE,a=n.NONE,o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.up.copy(o.up0),c.subVectors(o.object.position,o.target),o.object.lookAt(o.target),o.dispatchEvent(w),i.copy(o.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",q,!1),this.domElement.removeEventListener("mousedown",D,!1),this.domElement.removeEventListener("wheel",X,!1),this.domElement.removeEventListener("touchstart",H,!1),this.domElement.removeEventListener("touchend",B,!1),this.domElement.removeEventListener("touchmove",Z,!1),document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",z,!1),window.removeEventListener("keydown",k,!1),window.removeEventListener("keyup",F,!1)},this.domElement.addEventListener("contextmenu",q,!1),this.domElement.addEventListener("mousedown",D,!1),this.domElement.addEventListener("wheel",X,!1),this.domElement.addEventListener("touchstart",H,!1),this.domElement.addEventListener("touchend",B,!1),this.domElement.addEventListener("touchmove",Z,!1),window.addEventListener("keydown",k,!1),window.addEventListener("keyup",F,!1),this.handleResize(),this.update()},n.prototype=Object.create(s.EventDispatcher.prototype)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(1),i=o(3);t.default=class extends i.default{constructor(e=s.randomScalar,t=s.randomScalar,o=s.randomScalar,i=s.randomPoint){super(n.BoxBufferGeometry),this.width=e,this.height=t,this.depth=o,this.position=i}get dimensions(){return[this.width,this.height,this.depth]}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),s=o(1),i=o(3);t.default=class extends i.default{constructor(e=s.randomScalar,t=s.randomPoint){super(n.SphereBufferGeometry),this.radius=e,this.position=t,this.latitudeSegments=30,this.longitudeSegments=30}get dimensions(){return[this.radius,s.toFunction(this.latitudeSegments),s.toFunction(this.longitudeSegments)]}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.renderFn=e.controls?e.controls.update:t,e.controls&&(e.controls.addEventListener("change",({timeStamp:e})=>{t(e)}),t(0)),this.loop_=(e=>{requestAnimationFrame(this.loop_),this.renderFn(e)}),this.loop_(0)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(5),s=o(4);t.default=class{constructor(e,t){this.dataset=e,this.ctor=t,this.maps={}}set(e,t){return this.maps[e]=t,this}make(){switch(this.ctor.prototype.constructor){case n.default:case s.default:const e=new this.ctor;return this.setMaps(e),[e.realize(this.dataset.data)];default:return this.dataset.data.map((e,t)=>{const o=new this.ctor;return this.setMaps(o),o.realize(e,t)})}}setMaps(e){for(const t in this.maps)e[t]=this.maps[t]}}}])});